<div class="mapa-container">
  <!-- Controles 3D -->
  <div class="controls">
    <h4>Controles 3D</h4>
    
    <!-- Controles de caracterÃ­sticas -->
    <div class="control-group">
      <label>CaracterÃ­sticas 3D:</label>
      <button 
        [class.active]="terrainEnabled"
        (click)="toggleTerrain()">
        {{ terrainEnabled ? 'âœ“' : '' }} Terreno 3D
      </button>
      <button 
        [class.active]="buildingsEnabled"
        (click)="toggleBuildings()">
        {{ buildingsEnabled ? 'âœ“' : '' }} Edificios 3D
      </button>
      <button 
        [class.active]="fogEnabled"
        (click)="toggleFog()">
        {{ fogEnabled ? 'âœ“' : '' }} AtmÃ³sfera
      </button>
    </div>

    <!-- Control de exageraciÃ³n del terreno -->
    <div class="control-group">
      <label>ExageraciÃ³n del Terreno:</label>
      <div class="slider-container">
        <input 
          type="range" 
          min="0.5" 
          max="3" 
          step="0.1" 
          [value]="exaggeration"
          (input)="updateExaggeration(+$any($event.target).value)">
        <span>{{exaggeration}}x</span>
      </div>
    </div>

    <!-- BÃºsqueda de ubicaciones -->
    <div class="control-group">
      <label>Buscar UbicaciÃ³n:</label>
      <div class="search-container">
        <input 
          type="text" 
          #searchInput
          [(ngModel)]="searchQuery"
          (keyup.enter)="searchLocation()"
          placeholder="Ej: Torre Eiffel, ParÃ­s"
          class="search-input">
        <button (click)="searchLocation()" class="search-btn">ğŸ”</button>
      </div>
      <div *ngIf="searchLoading" class="loading">Buscando...</div>
    </div>

    <!-- Ubicaciones guardadas -->
    <div class="control-group">
      <label>Ubicaciones Guardadas:</label>
      <div class="locations-grid">
        <!-- Ubicaciones predefinidas -->
        <div *ngFor="let location of defaultLocations" class="location-item">
          <button (click)="flyToSavedLocation(location)" [title]="location.name">
            {{location.emoji}} {{location.shortName}}
          </button>
          <button (click)="removeLocation(location.id, 'default')" class="remove-btn" title="Eliminar">Ã—</button>
        </div>
        
        <!-- Ubicaciones de bÃºsquedas recientes -->
        <div *ngFor="let location of recentSearches" class="location-item">
          <button (click)="flyToSavedLocation(location)" [title]="location.name">
            ğŸ“ {{location.shortName}}
          </button>
          <button (click)="removeLocation(location.id, 'recent')" class="remove-btn" title="Eliminar">Ã—</button>
        </div>
      </div>
      
      <div *ngIf="defaultLocations.length === 0 && recentSearches.length === 0" class="no-locations">
        No hay ubicaciones guardadas. Â¡Busca un lugar para agregarlo!
      </div>
    </div>

    <!-- Reset -->
    <div class="control-group">
      <button (click)="resetView()" class="reset">ğŸ  Vista Inicial</button>
    </div>
  </div>

  <!-- Panel de informaciÃ³n -->
  <div class="info-panel">
    <h5>CaracterÃ­sticas 3D Activas:</h5>
    <ul>
      <li *ngIf="terrainEnabled">âœ… Terreno 3D con elevaciÃ³n real</li>
      <li *ngIf="buildingsEnabled">âœ… Edificios 3D extruidos</li>
      <li *ngIf="fogEnabled">âœ… Efectos atmosfÃ©ricos</li>
      <li *ngIf="!terrainEnabled && !buildingsEnabled && !fogEnabled">â„¹ï¸ Activa las caracterÃ­sticas 3D usando los controles</li>
    </ul>
    <p>
      ğŸ’¡ Usa clic y arrastre para rotar, rueda del mouse para zoom, Shift+arrastre para inclinar
    </p>
  </div>

  <!-- Contenedor del mapa -->
  <div #mapa class="mapa-element"></div>
</div>
